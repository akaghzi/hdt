<div class="row">
	<div class="col-sm-2">
		<h3 class="text-muted">
			Shopping list:
		</h3>
	</div>
	<div class-"form-inline" role="form">
		<%= form_tag(@list_item, method: "get", ) do %>
		<div class="form-group">
			<div class="col-sm-4">
				<div class="input-group">
					<%= text_field_tag :search, params[:search], autofocus: true, placeholder: "item name", class: "form-control" %>
					<div class="input-group-btn">
						<button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
						<%= link_to glyph("plus-sign"), new_list_item_path, class: "btn btn-success" %>
					</div>
				</div>
			</div>				
		</div>                  
		<% end %>
	</div>	
</div>
<div class="panel panel-info">
	<!-- Default panel contents -->
	<div class="panel-heading">
	<h3 class="panel-title">
		Incomplete:
	</h3>
	</div>
	<div class="panel-body">
	</div>
		<% if @unbasketedlists.blank? %>
			<p>Empty.
				 <%= link_to glyph("plus-sign"), new_list_item_path, class: "btn btn-success" %>
			 </p>
			<% else %>
			<table class="table table-striped">
				<tr>
					<th>Name</th>
					<!-- <th>Unit</th> -->
					<th>Qty</th>
					<th>Price</th>
					<!-- <th>List type</th> -->
					<!-- <th>Category</th> -->
					<th>Store</th>
					<!-- <th>Brand</th> -->
					<!-- <th>Identifier</th> -->
					<th>Action</th>
				</tr>
				<% @unbasketedlists.each do |list_item| %>
				<tr>
					<td>
						<%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %>
						<% if list_item.favorite %>
						<i class="text-danger glyphicon glyphicon-heart"></i>
						<% end %>
						<% if list_item.task_id %>
						<%= link_to glyph(:wrench), task_path(list_item.task_id), class: "text-danger" %>
						<% end %>
					</td>
					<!-- <td><%#= list_item.unit.name %></td> -->
					<td><%= list_item.quantity %></td>
					<td>
						<% if list_item.price.nil? %>
						<span class="badge">?</span>
						<% else %>
						<%= list_item.price %>
						<% end %>
					</td>
					<!-- <td><%#= list_item.list_type.name %></td> -->
					<!-- <td><%#= list_item.item_category.name %></td> -->
					<td><%= list_item.store.name %></td>
					<!-- <td><%#= list_item.brand.name %></td> -->
					<!-- <td><%#= list_item.identifier %></td> -->
					<td>
						<%= link_to glyph("shopping-cart"), list_item_putinbasket_path(list_item), class: "btn btn-info btn-xs" %>
						<%= link_to glyph("remove-sign"), list_item, class: "btn btn-danger btn-xs", method: :delete, data: { confirm: 'Are you sure?' } %>
					</td>
				</tr>
				<% @totalprice = @totalprice + (list_item.price || 0.00) %>
				<% end %>
				<tr>
					<!-- <td></td> -->
					<td></td>
					<td><strong>Total</strong></td>
					<td><strong><%= @totalprice %></strong></td>
					<!-- <td></td> -->
					<td></td>
					<td></td>
				</tr>
			</table>
		<% end %>
</div>
<div class="panel panel-warning">
	<!-- Default panel contents -->
	<div class="panel-heading">
		<h3 class="panel-title">
		In Basket:
	</h3>
</div>
	<div class="panel-body">
	</div>
<% if @basketedlists.blank? %>
<p>
	Empty.
</p>
<% else %>
<table class="table table-striped">
	<tr>
		<th>Name</th>
		<!-- <th>Unit</th> -->
		<th>Qty</th>
		<th>Price</th>
		<!-- <th>List type</th> -->
		<!-- <th>Category</th> -->
		<th>Store</th>
		<!-- <th>Brand</th> -->
		<!-- <th>Identifier</th> -->
		<th>Action</th>
	</tr>
	<% @totalprice = 0.00 %>
	<% @basketedlists.each do |list_item| %>
	<tr>
		<td><%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %></td>
		<!-- <td><%#= list_item.unit.name %></td> -->
		<td><%= list_item.quantity %></td>
		<td>
			<% if list_item.price.nil? %>
			<span class="badge">?</span>
			<% else %>
			<%= list_item.price %>
			<% end %>
		</td>
		<!-- <td><%#= list_item.list_type.name %></td> -->
		<!-- <td><%#= list_item.item_category.name %></td> -->
		<td><%= list_item.store.name %></td>
		<!-- <td><%#= list_item.brand.name %></td> -->
		<!-- <td><%#= list_item.identifier %></td> -->
		<td>
			<%= link_to glyph("ok-sign"), list_item_complete_path(list_item), data: {confirm: "Are you sure?"}, class: "btn btn-success btn-xs" %>
			<%= link_to glyph("backward"), list_item_takeoutofbasket_path(list_item), class: "btn btn-warning btn-xs" %>
		</td>
	</tr>
	<% @totalprice = @totalprice + (list_item.price || 0.00)%>
	<% end %>
	<tr>
		<!-- <td></td> -->
		<td></td>
		<td><strong>Total</strong></td>
		<td><strong><%= @totalprice %></strong></td>
		<td></td>
		<!-- <td></td> -->
		<td></td>
	</tr>
</table>
<% end %>
</div>
<% else %>
<div class="panel panel-success">
	<!-- Default panel contents -->
	<div class="panel-heading">
		<h3 class="panel-title">
		Complete:
	</h3>
</div>
	<div class="panel-body">
	</div>
<% if @completedlists.blank? %>
<p>
	Empty.
</p>
<% else %>
<table class="table table-striped">
	<tr>
		<th>Name</th>
		<!-- <th>Unit</th> -->
		<th>Qty</th>
		<th>Price</th>
		<!-- <th>List type</th> -->
		<!-- <th>Category</th> -->
		<th>Store</th>
		<!-- <th>Brand</th> -->
		<!-- <th>Identifier</th> -->
		<th>Action</th>
	</tr>
	<% @totalprice = 0.00 %>
	<% @completedlists.each do |list_item| %>
	<tr>
		<td><%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %></td>
		<!-- <td><%#= list_item.unit.name %></td> -->
		<td><%= list_item.quantity %></td>
		<td>
			<% if list_item.price.nil? %>
			<!-- <i class="text-danger glyphicon glyphicon-question-sign"></i> -->
			<span class="badge">?</span>
			<% else %>
			<%= list_item.price %>
			<% end %>
		</td>
		<!-- <td><%#= list_item.list_type.name %></td> -->
		<!-- <td><%#= list_item.item_category.name %></td> -->
		<td><%= list_item.store.name %></td>
		<!-- <td><%#= list_item.brand.name %></td> -->
		<!-- <td><%#= list_item.identifier %></td> -->
		<td>
			<%= link_to glyph("pencil"), edit_list_item_path(list_item), class: "btn btn-default btn-xs" %>
		</td>
	</tr>
	<% @totalprice = @totalprice + (list_item.price||0.00) %>
	<% end %>
	<tr>
		<!-- <td></td> -->
		<td></td>
		<td><strong>Total</strong></td>
		<td><strong><%= @totalprice %></strong></td>
		<!-- <td></td> -->
		<td></td>
		<td></td>
	</tr>
</table>
<% end %>
</div>
