<div class="row">
	<div class="col-sm-2">
		<h3 class="text-muted">
			Shopping list:
		</h3>
	</div>
	<div class-"form-inline" role="form">
		<%= form_tag(@list_item, method: "get", ) do %>
		<div class="form-group">
			<div class="col-sm-4">
				<div class="input-group">
					<%= text_field_tag :search, params[:search], autofocus: true, placeholder: "item name", class: "form-control" %>
					<div class="input-group-btn">
						<button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
					</div>
				</div>
			</div>				
		</div>                  
		<% end %>
	</div>	
</div>	
<h4 class="text-info">
	Wish list items:
</h4>
<% if @unbasketedlists.blank? %>
<p>
	There are no items in the list_item.
</p>
<% else %>
<table class="table table-striped">
	<tr>
		<th>Name</th>
		<th>Unit</th>
		<th>Quantity</th>
		<th>Price</th>
		<!-- <th>List type</th> -->
		<th>Item category</th>
		<th>Store</th>
		<!-- <th>Brand</th> -->
		<!-- <th>Identifier</th> -->
		<th>Action</th>
	</tr>
	<% @unbasketedlists.each do |list_item| %>
	<tr>
		<td>
			<%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %>
			<% if list_item.favorite %>
			  <i class="text-danger glyphicon glyphicon-heart"></i>
			<% end %>
			<% if list_item.task_id %>
					<%= link_to glyph(:wrench), task_path(list_item.task_id), class: "text-danger" %>
			<% end %>
		</td>
		<td><%= list_item.unit.name %></td>
		<td><%= list_item.quantity %></td>
		<td>
			<% if list_item.price.nil? %>
			<span class="badge">?</span>
			<% else %>
			<%= list_item.price %>
			<% end %>
		</td>
		<!-- <td><%#= list_item.list_type.name %></td> -->
		<td><%= list_item.item_category.name %></td>
		<td><%= list_item.store.name %></td>
		<!-- <td><%#= list_item.brand.name %></td> -->
		<!-- <td><%#= list_item.identifier %></td> -->
		<td>
			<%= link_to 'Basket', list_item_putinbasket_path(list_item), class: "btn btn-info btn-xs", role: "button" %>
			<%= link_to 'Delete', list_item, class: "btn btn-danger btn-xs", method: :delete, data: { confirm: 'Are you sure?' } %>
		</td>
	</tr>
	<% @totalprice = @totalprice + list_item.price %>
	<% end %>
	<tr>
		<td></td>
		<td></td>
		<td><strong>Total</strong></td>
		<td><strong><%= @totalprice %></strong></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>

<% end %>
<%= link_to 'Add item', new_list_item_path, class: "btn btn-primary btn-sm", role: "button" %>
<h4 class="text-success">
	In basket items:
</h4>
<% if @basketedlists.blank? %>
<p>
	There are no items in the basket.
</p>
<% else %>
<table class="table table-responsive table-striped">
	<tr>
		<th>Name</th>
		<th>Unit</th>
		<th>Quantity</th>
		<th>Price</th>
		<!-- <th>List type</th> -->
		<th>Item category</th>
		<th>Store</th>
		<!-- <th>Brand</th> -->
		<!-- <th>Identifier</th> -->
		<th>Action</th>
	</tr>
	<% @totalprice = 0.00 %>
	<% @basketedlists.each do |list_item| %>
	<tr>
		<td><%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %></td>
		<td><%= list_item.unit.name %></td>
		<td><%= list_item.quantity %></td>
		<td>
			<% if list_item.price.nil? %>
			<span class="badge">?</span>
			<% else %>
			<%= list_item.price %>
			<% end %>
		</td>
		<!-- <td><%#= list_item.list_type.name %></td> -->
		<td><%= list_item.item_category.name %></td>
		<td><%= list_item.store.name %></td>
		<!-- <td><%#= list_item.brand.name %></td> -->
		<!-- <td><%#= list_item.identifier %></td> -->
		<td>
			<%= link_to 'Complete', list_item_complete_path(list_item), data: {confirm: "Are you sure?"}, class: "btn btn-success btn-xs" %>
			<%= link_to 'Unbasket', list_item_takeoutofbasket_path(list_item), class: "btn btn-warning btn-xs" %>
		</td>
	</tr>
	<% @totalprice = @totalprice + list_item.price %>
	<% end %>
	<tr>
		<td></td>
		<td></td>
		<td><strong>Total</strong></td>
		<td><strong><%= @totalprice %></strong></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<% end %>
<h4 class="text-warning">
	Completed items [last 30 days]:
</h4>
<% if @completedlists.blank? %>
<p>
	There are no items in the completed list_item.
</p>
<% else %>
<table class="table table-responsive table-striped">
	<tr>
		<th>Name</th>
		<th>Unit</th>
		<th>Quantity</th>
		<th>Price</th>
		<!-- <th>List type</th> -->
		<th>Item category</th>
		<th>Store</th>
		<!-- <th>Brand</th> -->
		<!-- <th>Identifier</th> -->
		<th>Action</th>
	</tr>
	<% @totalprice = 0.00 %>
	<% @completedlists.each do |list_item| %>
	<tr>
		<td><%= link_to list_item.name, edit_list_item_path(list_item), class: "link" %></td>
		<td><%= list_item.unit.name %></td>
		<td><%= list_item.quantity %></td>
		<td>
			<% if list_item.price.nil? %>
			<!-- <i class="text-danger glyphicon glyphicon-question-sign"></i> -->
			<span class="badge">?</span>
			<% else %>
			<%= list_item.price %>
			<% end %>
		</td>
		<!-- <td><%#= list_item.list_type.name %></td> -->
		<td><%= list_item.item_category.name %></td>
		<td><%= list_item.store.name %></td>
		<!-- <td><%#= list_item.brand.name %></td> -->
		<!-- <td><%#= list_item.identifier %></td> -->
		<td>
			<%= link_to 'Fix data', edit_list_item_path(list_item), class: "btn btn-default btn-xs" %>
		</td>
	</tr>
	<% @totalprice = @totalprice + list_item.price %>
	<% end %>
	<tr>
		<td></td>
		<td></td>
		<td><strong>Total</strong></td>
		<td><strong><%= @totalprice %></strong></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<% end %>
